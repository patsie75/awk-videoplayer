#!/usr/bin/gawk -f
@include "src/ord.gawk"
@include "src/yuv.gawk"

BEGIN {
  RS = ".{" width * 2 "}"
}

{
  byte = 1
  line = ""
  split(RT, data, "")

  for (x=0; x<width; x+=2)
  {
    u  = ORD[data[byte]]
    y1 = ORD[data[byte+1]]
    v  = ORD[data[byte+2]]
    y2 = ORD[data[byte+3]]
    
    line = line " " yuv2rgb(y1, u, v) " " yuv2rgb(y2, u, v)

    byte += 4
  }

  printf("%s\n", line)
  fflush()
}
